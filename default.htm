<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bubba's Crash</title>
    </head>
    <body>
        <div>

        </div>
        <script>
            // You need to edit this value
            var gameHash = 'cadaaef371bc977aae209dc9be1a30665550adf89fa40fc17771051914d1f9fc';

            /* 
            Below this line is the formula which we use to calculate the result
            */
            var crypto = require('crypto');
            const INSTANT_CRASH_PERCENTAGE = 6.66;
            var crashPointFromHash = function (serverSeed) {
                var hash = crypto.createHmac('sha256', serverSeed).digest('hex');

                // Use the most significant 52-bit from the hash to calculate the crash point
                var h = parseInt(hash.slice(0, 52 / 4), 16);
                var e = Math.pow(2, 52);
                const result = (100 * e - h) / (e - h);
                // INSTANT_CRASH_PERCENTAGE of 6.66 will result in modifier of 0.934 = 6.66% house edge with a lowest crashpoint of 1.00x
                const houseEdgeModifier = 1 - INSTANT_CRASH_PERCENTAGE / 100;
                const endResult = Math.max(100, result * houseEdgeModifier);

                return Math.floor(endResult);
            };

            console.log(`Hash: ${gameHash}\n\nGame crashed at ${(crashPointFromHash(gameHash) / 100).toFixed(2)}x`);
        </script>
    </body>
</html>